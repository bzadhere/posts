---
title: 数据库设计三范式
date: 2018-11-13 15:04:28
tags:
categories: 数据库
---

# 数据库设计三范式
为了建立冗余小、结构合理的数据库，设计数据库必须遵循一定的原则。实际工最常用的三范式：

<!-- more-->
## 第一范式(确保每列保持原子性)
第一范式是最基本的范式，表中的所有字段都是不可分割的原子值。

例如将“地址”这个属性重新拆分为省份、城市、详细地址等多个部分进行存储，这样在对地址中某一部分  
操作的时候将非常方便。这样设计才算满足了数据库的第一范式

## 第二范式(确保表中每列都和主键相关)
第二范式在第一范式的基础上，确保表中每一列都与主键相关，而不能与主键的某一部分相关(主要针对联合主键)。

比如要设计一个订单信息表，因为订单中可能会有多种商品，所以要将订单编号和商品编号作为数据库表的联合  
主键，如下表所示:

|订单编号 | 商品编号 | 商品名称 | 价格 | 客户 | 联系方式|
|-|-|-|-|-|-|
| 001 |   1   |  车|    10000|       张三|    88888888 |
| 002 |   2   |  帽子|  5    |       李四|    99999999 |

这个表中是以订单编号和商品编号作为联合主键。在该表中商品名称、单位、商品价格等信息不与该表的主键相  
关，而仅仅是与商品编号相关, 所以在这里违反了第二范式的设计原则。

如果把这个订单信息表进行拆分，把商品信息分离到另一个表中，把订单项目表也分离到另一个表中，就非常完美
订单信息表

| 订单编号 | 客户 | 联系方式 |
|-|-|-|
| 001 | 张三 | 88888888 |
| 002 | 李四 | 99999999 |

订单项目表

|订单编号|商品编号|数量|
|-|-|-|
|001|1|1|
|002|2|1|

商品信息表

|商品编号|商品名称|价格|
|-|-|-|
|1|车|10000|
|2|帽子|5|

这样设计，在很大程度上减小了数据库的冗余。

## 第三范式(确保每列都是和主键直接相关，而不是间接相关)
第三范式需要确保数据表中的每一列数据都和主键直接相关，而不能间接相关。

传递函数依赖：假设A、B和C是关系R的三个属性，如果A-〉B且B-〉C，则从这些函数依赖中，可以得出A-〉C，  
如上所述，依赖A-〉C是传递依赖。第三范式需要确保数据表中的每一列数据都和主键直接相关，而不能间接相关。

## 理解
> * 1NF是对属性的原子性约束，要求属性具有原子性，不可再分解。通俗的理解是，字段还可以再分吗？  
如过不能，则是符合1NF的设计
> * 2NF是对记录的惟一性约束，要求记录有惟一标识，即实体的惟一性。数据记录不重复冗余
> * 3NF是对字段冗余性的约束，即任何字段不能由其他字段派生出来，它要求字段没有冗余


## 其他
> * 鲍依斯-科得范式（BCNF）：满足 3NF，任何非主属性不能对主键子集依赖（消除 3NF 主属性对码的部分和  
传递函数依赖）
> * 第四范式（4NF）：满足 3NF，属性之间不能有非平凡且非函数依赖的多值依赖（消除 3NF 非平凡且非函数  
依赖的多值依赖）

