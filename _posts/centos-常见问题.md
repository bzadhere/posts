---
title: centos 常见问题
date: 2020-02-26 15:10:23
tags:
---



## DNS被自动修改

```
[root@localhost ~]# cat /etc/resolv.conf
; generated by /usr/sbin/dhclient-script
nameserver 10.1.1.8
nameserver 10.1.1.7
nameserver 10.1.1.8
nameserver 10.1.1.7
nameserver 223.5.5.5
nameserver 223.6.6.6
search localhost


// 1. 强制修改 resolv.conf 的文件flag，设定为不可被更改.
// +<属性>：开启文件或目录的该项属性；
// -<属性>：关闭文件或目录的该项属性；
chattr +i /etc/resolv.conf

// 2. 修改 /sbin/dhclient-script 把 make_resolv_conf 这个函数的调用都给注释掉
```



##  ftp

```
// 安装
yum install -y vsftpd
// 配置
vi /etc/vsftpd/vsftpd.conf

# 不允许匿名访问
anonymous_enable=NO 

# 允许本地账户登录
local_enable=YES

# 在文件中的用户能离开主目录
chroot_local_user=YES
chroot_list_enable=YES
chroot_list_file=/etc/vsftpd/chroot_list

# 500 OOPS: vsftpd: refusing to run with writable root inside chroot()
allow_writeable_chroot=YES

# 支持ASCII模式的上传和下载功能
ascii_upload_enable=YES
ascii_download_enable=YES 

// 重启
systemctl restart vsftpd.service
// 新建ftp用户 ftpuser
useradd -d /var/ftp/public_root -g ftp -s /sbin/nologin ftpuser
// 修改密码
passwd ftpuser




```

